(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[18],{Hhl5:function(e,t,a){"use strict";var l=a("TqRt"),r=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("sPJy");var u=l(a("bE4q"));a("+L6B");var d=l(a("2/Rp"));a("Mwp2");var n=l(a("VXEj"));a("g9YV");var i=l(a("wCAj"));a("14J3");var f=l(a("BMrR"));a("OaEy");var c=l(a("2fM7"));a("iQDF");var m=l(a("+eQT"));a("jCWc");var s=l(a("kPKH"));a("y8nQ");var o=l(a("Vl3Y"));a("5NDa");var p=l(a("5rEg")),E=l(a("MVZn"));a("miYZ");var h,v,g=l(a("tsqr")),y=l(a("lwsE")),b=l(a("W8MJ")),T=l(a("a1gu")),w=l(a("Nsbk")),I=l(a("7W2i")),V=r(a("q1tI")),S=l(a("mOP9")),k=a("MuoO"),D=l(a("wd/R")),x=l(a("KRy7")),Y=l(a("TleD")),M=l(a("jcFm")),R=function(e){function t(){var e,a;(0,y.default)(this,t);for(var l=arguments.length,r=new Array(l),u=0;u<l;u++)r[u]=arguments[u];return a=(0,T.default)(this,(e=(0,w.default)(t)).call.apply(e,[this].concat(r))),a.state={disabled:!0,data:a.props.data},a.handelSubmit=function(e){e.preventDefault();var t="YYYY-MM-DD";a.props.form.validateFields(function(e,l){if(e)g.default.error("\u5fc5\u586b\u9879\u672a\u586b\u5199");else{var r=function(){l.purchaseTime=l.purchaseTime?(0,D.default)(l.purchaseTime).format(t):null,l.activateDate=l.activateDate?(0,D.default)(l.activateDate).format(t):null,l.rentStartTime=l.rentStartTime?(0,D.default)(l.rentStartTime).format(t):null,l.rentEndTime=l.rentEndTime?(0,D.default)(l.rentEndTime).format(t):null,l.acceptTime=l.acceptTime?(0,D.default)(l.acceptTime).format(t):null,l.returnTime=l.returnTime?(0,D.default)(l.returnTime).format(t):null;var e={fixedAssetId:a.props.data.assetId};l=(0,E.default)({},l,e,{remark:l.acceptRecordRemark});var r=a.props.dispatch;r({type:"assetEditing/inset",payload:l})};if(l.rentStartTime)return l.rentStartTime._d.getTime()<=(l.rentEndTime?l.rentEndTime._d.getTime():l.rentStartTime._d.getTime())?void r():void g.default.error("\u79df\u8d41\u7ed3\u675f\u65f6\u95f4\u4e0d\u80fd\u65e9\u4e8e\u79df\u8d41\u5f00\u59cb\u65f6\u95f4");r()}})},a.selectChange=function(e){a.state.disabled="\u8d44\u4ea7\u501f\u7528"!==e},a.handelBlur=function(e){var t=a.props.dispatch;t({type:"useLibrary/getUser",payload:e.target.value}).then(function(){a.props.form.setFieldsValue({department:a.props.useLibrary.name.department,station:a.props.useLibrary.name.station})})},a.companyShow=function(){var e="YYYY-MM-DD",t=a.props.form,l=t.getFieldDecorator,r=a.state.data;return V.default.createElement("div",null,V.default.createElement(s.default,{span:8},V.default.createElement(o.default.Item,{label:"\u539f\u503c"},l("originalValue",{rules:[{required:!0,pattern:/^\d{1,9}(\.{0}|\.{1}\d{1,2})?$/,message:"\u8bf7\u8f93\u5165\u6570\u5b57\uff08\u53ef\u4fdd\u7559\u4e24\u4f4d\u5c0f\u6570\uff09"}],initialValue:r.originalValue})(V.default.createElement(p.default,{placeholder:"\u8bf7\u8f93\u5165\u539f\u6709\u4ef7\u503c",addonAfter:"\u5143"})))),V.default.createElement(s.default,{span:8},V.default.createElement(o.default.Item,{label:"\u91c7\u8d2d\u65f6\u95f4"},l("purchaseTime",{rules:[{required:!0}],initialValue:r.purchaseTime?(0,D.default)(r.purchaseTime,e):null})(V.default.createElement(m.default,{placeholder:"\u8bf7\u9009\u62e9\u91c7\u8d2d\u65f6\u95f4",style:{width:"100%"}})))),V.default.createElement(s.default,{span:8},V.default.createElement(o.default.Item,{label:"\u4f9b\u5e94\u5546"},l("supplier",{initialValue:r.supplier})(V.default.createElement(p.default,{placeholder:"\u8bf7\u8f93\u5165\u4f9b\u5e94\u5546"})))),V.default.createElement(s.default,{span:8},V.default.createElement(o.default.Item,{label:"\u542f\u7528\u65e5\u671f"},l("activateDate",{initialValue:r.activateDate?(0,D.default)(r.activateDate,e):null})(V.default.createElement(m.default,{placeholder:"\u8bf7\u9009\u62e9\u542f\u7528\u65e5\u671f",style:{width:"100%"}})))))},a.leaseAssetsShow=function(){var e="YYYY-MM-DD",t=a.props.form,l=t.getFieldDecorator,r=(t.getFieldProps,c.default.Option),u=a.state.data;return V.default.createElement("div",null,V.default.createElement(s.default,{span:5},V.default.createElement(o.default.Item,{label:"\u79df\u91d1"},V.default.createElement("span",null,l("rent",{rules:[{pattern:/^\d{1,9}(\.{0}|\.{1}\d{1,2})?$/,message:"\u8bf7\u8f93\u5165\u6570\u5b57\uff08\u53ef\u4fdd\u7559\u4e24\u4f4d\u5c0f\u6570\uff09"}],initialValue:u.rent})(V.default.createElement(p.default,{type:"text",style:{marginRight:"3%"},placeholder:"\u8bf7\u8f93\u5165\u79df\u91d1\u91d1\u989d"}))))),V.default.createElement(s.default,{span:3},V.default.createElement(o.default.Item,{label:"\u5355\u4f4d"},V.default.createElement("span",null,l("rentUnit",{initialValue:u.rentUnit})(V.default.createElement(c.default,null,V.default.createElement(r,{value:"\u5143/\u5929"},"\u5143/\u5929"),V.default.createElement(r,{value:"\u5143/\u6708"},"\u5143/\u6708"),V.default.createElement(r,{value:"\u5143/\u5b63"},"\u5143/\u5b63"),V.default.createElement(r,{value:"\u5143/\u5e74"},"\u5143/\u5e74")))))),V.default.createElement(s.default,{span:8},V.default.createElement(o.default.Item,{label:"\u79df\u8d41\u5f00\u59cb\u65f6\u95f4"},l("rentStartTime",{rules:[{required:!0}],initialValue:u.rentStartTime?(0,D.default)(u.rentStartTime,e):null})(V.default.createElement(m.default,{placeholder:"\u8bf7\u9009\u62e9\u79df\u8d41\u5f00\u59cb\u65f6\u95f4",style:{width:"100%"}})))),V.default.createElement(s.default,{span:8},V.default.createElement(o.default.Item,{label:"\u79df\u8d41\u7ed3\u675f\u65f6\u95f4"},l("rentEndTime",{initialValue:u.rentEndTime?(0,D.default)(u.rentEndTime,e):null})(V.default.createElement(m.default,{placeholder:"\u8bf7\u9009\u62e9\u79df\u8d41\u7ed3\u675f\u65f6\u95f4",style:{width:"100%"}})))),V.default.createElement(s.default,{span:8},V.default.createElement(o.default.Item,{label:"\u4f9b\u5e94\u5546"},l("supplier",{rules:[{required:!0}],initialValue:u.supplier})(V.default.createElement(p.default,{placeholder:"\u8bf7\u8f93\u5165\u4f9b\u5e94\u5546"})))),V.default.createElement(s.default,{span:8},V.default.createElement(o.default.Item,{label:"\u542f\u7528\u65e5\u671f"},l("activateDate",{initialValue:u.activateDate?(0,D.default)(u.activateDate,e):null})(V.default.createElement(m.default,{placeholder:"\u8bf7\u9009\u62e9\u542f\u7528\u65e5\u671f",style:{width:"100%"}})))))},a.retrievalShow=function(){var e="YYYY-MM-DD",t=a.state.data,l=a.props.form,r=l.getFieldDecorator,u=p.default.TextArea;return V.default.createElement("div",null,V.default.createElement(f.default,{style:{marginLeft:"10px"}},V.default.createElement(s.default,{span:7},V.default.createElement(o.default.Item,{label:"\u9886\u7528\u5ba1\u6279\u7f16\u53f7"},r("approvalNumber",{initialValue:t.approvalNumber})(V.default.createElement(p.default,{placeholder:"\u8bf7\u8f93\u5165"})))),V.default.createElement(s.default,{span:7,offset:1},V.default.createElement(o.default.Item,{label:"\u6d41\u8f6c\u7c7b\u578b"},r("transferType",{rules:[{required:!0}],initialValue:t.transferType})(V.default.createElement(c.default,{placeholder:"\u8d44\u4ea7\u53d1\u653e/\u8d44\u4ea7\u501f\u7528"},V.default.createElement(c.default.Option,{value:"\u8d44\u4ea7\u53d1\u653e"},"\u8d44\u4ea7\u53d1\u653e"),V.default.createElement(c.default.Option,{value:"\u8d44\u4ea7\u501f\u7528"},"\u8d44\u4ea7\u501f\u7528"))))),V.default.createElement(s.default,{span:7,offset:1},V.default.createElement(o.default.Item,{label:"\u9886\u7528\u65f6\u95f4"},r("acceptTime",{rules:[{required:!0}],initialValue:t.acceptTime?(0,D.default)(t.acceptTime,e):null})(V.default.createElement(m.default,{placeholder:"\u8bf7\u9009\u62e9\u9886\u7528\u65f6\u95f4",style:{width:"100%"}})))),V.default.createElement(s.default,{span:7},V.default.createElement(o.default.Item,{label:"\u9886\u7528\u4eba\u59d3\u540d"},r("acceptUser",{initialValue:t.acceptUser})(V.default.createElement(p.default,{placeholder:"\u9886\u7528\u4eba",onBlur:a.handelBlur})))),V.default.createElement(s.default,{span:7,offset:1},V.default.createElement(o.default.Item,{label:"\u6240\u5728\u90e8\u95e8"},r("department",{initialValue:t.department})(V.default.createElement(p.default,{placeholder:"\u6839\u636e\u9886\u7528\u4eba\u663e\u793a",disabled:!0})))),V.default.createElement(s.default,{span:7,offset:1},V.default.createElement(o.default.Item,{label:"\u5165\u804c\u5c97\u4f4d"},r("station",{initialValue:t.station})(V.default.createElement(p.default,{placeholder:"\u6839\u636e\u9886\u7528\u4eba\u663e\u793a",disabled:!0})))),V.default.createElement(s.default,{span:7},V.default.createElement(o.default.Item,{label:"\u501f\u7528\u5f52\u8fd8\u65f6\u95f4"},r("returnTime",{initialValue:t.returnTime?(0,D.default)(t.returnTime,e):null})(V.default.createElement(m.default,{placeholder:"\u8bf7\u9009\u62e9\u9886\u7528\u65f6\u95f4",style:{width:"100%"},disabled:"\u8d44\u4ea7\u501f\u7528"!==l.getFieldValue("transferType")}))))),V.default.createElement(f.default,{style:{marginLeft:"10px"}},V.default.createElement(s.default,{span:12},V.default.createElement(M.default,{label:"\u5907\u6ce8"},r("acceptRecordRemark",{rules:[{max:300,required:!1,message:"\u6700\u591a\u8f93\u5165300\u4e2a\u5b57\u7b26"}],initialValue:t.acceptRecordRemark})(V.default.createElement(u,{placeholder:"\u6700\u591a\u8f93\u5165300\u4e2a\u5b57\u7b26",rows:5}))))))},a.enclosureShow=function(){var e=a.state.data,t=[{title:"\u9644\uff08\u914d\uff09\u4ef6",dataIndex:"enclosure",width:300},{title:"\u6570\u91cf",dataIndex:"number",width:300},{title:"",dataIndex:"null"}],l=e.enclosure?e.enclosure.split(/\s*;\s*/):[];l.forEach(function(e,t){e||l.splice(t,1)});var r=l.map(function(e,t){var a={},l=[];return e&&(l=e.split(/\s+/)),l[1]?(a.key=t,a.enclosure=l[0],a.number=l[1],a):(a.key=t,a.enclosure="\u65e0\u65b0\u589e\u9644\u914d\u4ef6",a)}),u={defaultPageSize:20};return V.default.createElement("div",null,V.default.createElement(i.default,{key:r.key,columns:t,dataSource:r,style:{padding:"20px"},pagination:u,className:Y.default.ledgerTable}))},a}return(0,I.default)(t,e),(0,b.default)(t,[{key:"render",value:function(){var e=this.state.data,t=this.props,a=(t.visible,t.onCancel,t.onCreate,t.form),l=a.getFieldDecorator,r=(a.getFieldProps,a.getFieldValue,this.state,c.default.Option),u=[V.default.createElement(o.default.Item,{label:"\u5e8f\u5217\u53f7",key:"serialNumber",style:{width:"100%"}},l("serialNumber",{rules:[{required:!0,message:"\u5e8f\u5217\u53f7\u672a\u586b\u5199"}],initialValue:e.serialNumber})(V.default.createElement(p.default,{style:{height:"50px"},placeholder:"\u8bf7\u8f93\u5165\u56fa\u8d44\u5e8f\u5217\u53f7\u3001SN\u3001\u8bc6\u522b\u7801\uff1b\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u626b\u7801\u67aa\u626b\u7801\u5f55\u5165\uff1b\u591a\u53f0\u540c\u4f9b\u5e94\u5546\u540c\u578b\u53f7\u540c\u4ef7\u503c\u8bbe\u5907\u53ef\u4ee5\u540c\u65f6\u6dfb\u52a0\uff1b\u8bf7\u4ee5\u82f1\u6587\u9017\u53f7\uff08\uff0c\uff09\u5206\u9694\uff1b"})))],i=[V.default.createElement("div",{style:{width:"100%"},key:"basicInfo"},V.default.createElement(f.default,{gutter:24},V.default.createElement(s.default,{span:8},V.default.createElement(o.default.Item,{label:"\u6765\u6e90"},l("source",{rules:[{required:!0}],initialValue:e.source})(V.default.createElement(c.default,null,V.default.createElement(r,{value:"\u516c\u53f8\u8d44\u4ea7"},"\u516c\u53f8\u8d44\u4ea7"),V.default.createElement(r,{value:"\u79df\u8d41\u8d44\u4ea7"},"\u79df\u8d41\u8d44\u4ea7")))))),V.default.createElement(f.default,{gutter:24},"\u516c\u53f8\u8d44\u4ea7"===a.getFieldValue("source")?this.companyShow():this.leaseAssetsShow()))],m=[V.default.createElement("div",{style:{width:"100%"},key:"retrievalInfo"},V.default.createElement(f.default,{gutter:24},this.retrievalShow()))],E=[V.default.createElement("div",{style:{width:"100%"},key:"enclosureInfo"},V.default.createElement(f.default,{gutter:24},this.enclosureShow()))];return V.default.createElement(o.default,{onSubmit:this.handelSubmit},function(){for(var e=[{header:"\u5e8f\u5217\u53f7",dataSource:u},{header:"\u57fa\u672c\u4fe1\u606f",dataSource:i},{header:"\u9886\u7528\u4fe1\u606f",dataSource:m},{header:"\u9644\uff08\u914d\uff09\u4ef6",dataSource:E}],t=[],a=0;a<e.length;a++)t.push(V.default.createElement("div",{key:e[a].header},V.default.createElement(n.default,{size:"large",header:V.default.createElement("h3",null,e[a].header),dataSource:e[a].dataSource,style:{margin:"20px 0",background:"#fff",padding:"20px"},renderItem:function(e){return V.default.createElement(n.default.Item,{key:e.key},e)}})));return t}(),V.default.createElement("div",{style:{height:"50px",background:"#fff",lineHeight:"50px"}},V.default.createElement("div",{style:{float:"right",marginRight:"20px"}},V.default.createElement(d.default,{style:{marginRight:"20px"}},V.default.createElement("a",{href:"/solid-assets-management/assets-ledger"},"\u53d6\u6d88")),V.default.createElement(d.default,{type:"primary",htmlType:"submit"},"\u63d0\u4ea4"))))}}]),t}(V.default.Component),q=o.default.create()(R),F=(h=(0,k.connect)(function(e){var t=e.assetEditing,a=e.useLibrary,l=e.loading;return{assetEditing:t,useLibrary:a,loading:l.models.assetEditing}}),h(v=function(e){function t(){return(0,y.default)(this,t),(0,T.default)(this,(0,w.default)(t).apply(this,arguments))}return(0,I.default)(t,e),(0,b.default)(t,[{key:"render",value:function(){var e=this.props.location.state;return V.default.createElement("div",null,V.default.createElement("div",{className:x.default.assetTypeHeader},V.default.createElement("div",null,V.default.createElement(u.default,null,V.default.createElement(u.default.Item,null,"\u57fa\u7840\u7ba1\u7406"),V.default.createElement(u.default.Item,null,"\u7f16\u8f91"))),V.default.createElement("div",null,V.default.createElement("h2",null,"\u56fa\u8d44\u7f16\u8f91"))),V.default.createElement(n.default,{style:{margin:"20px 0",background:"#fff",padding:"20px"}},V.default.createElement(n.default.Item,{style:{position:"relative"}},V.default.createElement("h3",null,"\u5df2\u9009\u7269\u8d44"),V.default.createElement(S.default,{style:{position:"absolute",right:"20px",marginRight:"20px"},to:"/solid-assets-management/assets-ledger"},"\u8fd4\u56de\u91cd\u65b0\u9009\u62e9")),V.default.createElement(n.default.Item,null,V.default.createElement("div",{style:{width:"100%"}},V.default.createElement("div",{style:{background:"rgb(240,240,240)",height:"50px",lineHeight:"50px",width:"100%",margin:"20px 0"}},"\u3010",e.assetNumber,"\u3011",e.assetType," > ",e.brand," > ",e.model," > ",e.serialNumber," > ",e.source)))),V.default.createElement(q,{data:e,dispatch:this.props.dispatch,useLibrary:this.props.useLibrary}))}}]),t}(V.Component))||v),N=F;t.default=N}}]);