(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[21],{"+7jS":function(e,t,a){"use strict";var l=a("TqRt"),r=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("g9YV");var n=l(a("wCAj"));a("+L6B");var u=l(a("2/Rp"));a("sPJy");var d=l(a("bE4q")),o=l(a("MVZn"));a("P2fV");var i=l(a("NJEC"));a("/zsF");var c=l(a("PArb"));a("2qtc");var f=l(a("kLXV"));a("OaEy");var s=l(a("2fM7")),p=l(a("lwsE")),m=l(a("W8MJ")),y=l(a("a1gu")),h=l(a("Nsbk")),v=l(a("7W2i"));a("5NDa");var E=l(a("5rEg"));a("y8nQ");var b,g,k=l(a("Vl3Y")),C=r(a("q1tI")),w=l(a("mOP9")),q=a("MuoO"),x=l(a("1FfP")),T=l(a("KRy7")),D=k.default.Item,F=E.default.TextArea,N=k.default.create()(function(e){function t(){var e,a;(0,p.default)(this,t);for(var l=arguments.length,r=new Array(l),n=0;n<l;n++)r[n]=arguments[n];return a=(0,y.default)(this,(e=(0,h.default)(t)).call.apply(e,[this].concat(r))),a.handleSubmit=function(){a.props.form.validateFields(function(e,t){e||a.props.form.resetFields()})},a}return(0,v.default)(t,e),(0,m.default)(t,[{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onCancel,l=e.onCreate,r=e.form,n=e.directoryType,u=r.getFieldDecorator;return C.default.createElement(f.default,{visible:t,title:"\u65b0\u589e\u76ee\u5f55",okText:"\u6dfb\u52a0",onCancel:a,onOk:l},C.default.createElement(k.default,null,C.default.createElement(D,{label:"\u7c7b\u578b"},u("directoryType",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165"}]})(C.default.createElement(s.default,{placeholder:"\u8bf7\u9009\u62e9\u8d44\u4ea7\u7c7b\u578b"},n?n.map(function(e,t){return C.default.createElement(s.default.Option,{key:t,value:e},e)}):null))),C.default.createElement(D,{label:"\u54c1\u724c"},u("brand",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u54c1\u724c"}]})(C.default.createElement(E.default,{placeholder:"\u8bf7\u8f93\u5165\u54c1\u724c"}))),C.default.createElement(D,{label:"\u578b\u53f7"},u("model",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u578b\u53f7"}]})(C.default.createElement(E.default,{placeholder:"\u8bf7\u8f93\u5165\u578b\u53f7"}))),C.default.createElement(D,{labelAssetsDirectory:"\u5907\u6ce8"},u("remark")(C.default.createElement(F,{rows:5})))))}}]),t}(C.default.Component)),S=(b=(0,q.connect)(function(e){var t=e.global,a=e.queryDirectory,l=e.storage;return{global:t,queryDirectory:a,storage:l}}),b(g=function(e){function t(){var e,a;(0,p.default)(this,t);for(var l=arguments.length,r=new Array(l),n=0;n<l;n++)r[n]=arguments[n];return a=(0,y.default)(this,(e=(0,h.default)(t)).call.apply(e,[this].concat(r))),a.state={visible:!1,dataType:[]},a.columns=[{title:"\u5e8f\u53f7",dataIndex:"id",fixed:"left",width:100,render:function(e,t,l){return C.default.createElement("span",null,10*(a.props.queryDirectory.data.current-1)+l+1)}},{title:"\u76ee\u5f55\u7f16\u53f7",dataIndex:"directoryNumber"},{title:"\u7c7b\u578b",dataIndex:"directoryType"},{title:"\u54c1\u724c",dataIndex:"brand"},{title:"\u578b\u53f7",dataIndex:"model"},{title:"\u5907\u6ce8",dataIndex:"remark",width:120,className:"remark",render:function(e){return C.default.createElement("span",{title:e},e||"-")}},{title:"\u64cd\u4f5c",fixed:"right",width:200,render:function(e,t){return C.default.createElement("span",null,C.default.createElement(w.default,{to:{pathname:"/basic-management/assets-storage",state:t}},"\u8d44\u4ea7\u5165\u5e93"),C.default.createElement(c.default,{type:"vertical"}),C.default.createElement(i.default,{title:"\u786e\u5b9a\u5220\u9664\u8be5\u7c7b\u578b\uff1f",onConfirm:function(){return a.handleDelete(t)}},C.default.createElement("a",{href:"javascript:;"},"\u5220\u9664")))}}],a.unique=function(e){for(var t=[],a=0,l=e.length;a<l;a++){for(var r=e[a],n=0,u=t.length;n<u;n++)if(t[n]===r)break;n===u&&t.push(r)}return t},a.showModal=function(){a.setState({visible:!0})},a.handleCancel=function(){a.setState({visible:!1})},a.handleCreate=function(){var e=a.formRef.props.form;e.validateFields(function(t,l){if(!t){var r=a.props.dispatch;r({type:"queryDirectory/addDirectory",payload:l}),e.resetFields(),a.setState({visible:!1})}})},a.handleDelete=function(e){var t=a.props.dispatch;t({type:"queryDirectory/delete",payload:e})},a.saveFormRef=function(e){a.formRef=e},a}return(0,v.default)(t,e),(0,m.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.dispatch;t({type:"queryDirectory/fetch"}),t({type:"global/fetchType",callback:function(t){e.setState({dataType:t})}})}},{key:"pageChange",value:function(e){var t=this.props.dispatch,a=this.form.props.form.getFieldsValue(),l={pageNo:e};a=(0,o.default)({},a,l),t({type:"queryDirectory/search",payload:a})}},{key:"render",value:function(){var e=this,t=this.state,a=t.visible,l=t.dataType,r=(t.type,this.props.queryDirectory.data),o=r.records?r.records:[],i={onChange:this.pageChange.bind(this),current:r.current,pageSize:r.size,total:r.total,showQuickJumper:!0,showTotal:function(e,t){return"\u5171".concat(e,"\u6761\u8bb0\u5f55 \u7b2c").concat(t[0],"-").concat(t[1],"\u6761 ")}},c=l?l.map(function(e){return"\u542f\u7528"===e.assetTypeState?e.assetTypeName:null}):[],f=l?l.map(function(e){return e.assetTypeName}):[];return c=c.filter(function(e){return e}),c=this.unique(c),f=this.unique(f),C.default.createElement("div",null,C.default.createElement("div",{className:T.default.assetTypeHeader},C.default.createElement("div",null,C.default.createElement(d.default,null,C.default.createElement(d.default.Item,null,"\u57fa\u7840\u7ba1\u7406"),C.default.createElement(d.default.Item,null,"\u8d44\u4ea7\u76ee\u5f55"))),C.default.createElement("div",null,C.default.createElement("h2",null,"\u8d44\u4ea7\u76ee\u5f55"))),C.default.createElement("div",{className:T.default.assetTypeList},C.default.createElement("div",{className:T.default.tool},C.default.createElement(x.default,{directoryType:f,wrappedComponentRef:function(t){return e.form=t}})),C.default.createElement("div",{style:{marginLeft:"20px"}},C.default.createElement(u.default,{type:"primary",onClick:this.showModal},"+ \u65b0\u589e\u76ee\u5f55")),C.default.createElement(N,{wrappedComponentRef:this.saveFormRef,visible:a,onCancel:this.handleCancel,onCreate:this.handleCreate,directoryType:c}),C.default.createElement(n.default,{rowKey:"directoryId",bordered:!0,pagination:i,columns:this.columns,dataSource:o,scroll:{x:1500},style:{padding:"20px",boxSizing:"border-box"}})))}}]),t}(C.PureComponent))||g),R=S;t.default=R},"1FfP":function(e,t,a){"use strict";var l=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("Pwec");var r=l(a("CtXQ"));a("+L6B");var n=l(a("2/Rp"));a("14J3");var u=l(a("BMrR"));a("5NDa");var d=l(a("5rEg"));a("jCWc");var o=l(a("kPKH")),i=l(a("pVnL"));a("OaEy");var c=l(a("2fM7")),f=l(a("lwsE")),s=l(a("W8MJ")),p=l(a("a1gu")),m=l(a("Nsbk")),y=l(a("7W2i"));a("y8nQ");var h,v,E=l(a("Vl3Y")),b=l(a("q1tI")),g=a("MuoO"),k=E.default.Item,C=(h=(0,g.connect)(function(e){var t=e.queryDirectory;return{queryDirectory:t}}),h(v=function(e){function t(){var e,a;(0,f.default)(this,t);for(var l=arguments.length,r=new Array(l),n=0;n<l;n++)r[n]=arguments[n];return a=(0,p.default)(this,(e=(0,m.default)(t)).call.apply(e,[this].concat(r))),a.state={expand:!1},a.handleReset=function(){a.props.form.resetFields()},a.toggle=function(){var e=a.state.expand;a.setState({expand:!e})},a.handleSearch=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){var l=a.props.dispatch;l({type:"queryDirectory/search",payload:t})}})},a}return(0,y.default)(t,e),(0,s.default)(t,[{key:"getFields",value:function(){for(var e={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}},t=this.state.expand?6:3,a=this.props.form.getFieldDecorator,l=[],r=[{label:"\u76ee\u5f55\u7c7b\u578b",name:"directoryType"},{label:"\u54c1\u724c",name:"brand"},{label:"\u578b\u53f7",name:"model"},{label:"\u76ee\u5f55\u7f16\u53f7",name:"directoryNumber"}],n=this.props.directoryType,u=0;u<r.length;u++)0!==u?l.push(b.default.createElement(o.default,{span:8,key:u,style:{display:u<t?"block":"none"}},b.default.createElement(k,(0,i.default)({label:"".concat(r[u].label)},e),3===u?a("".concat(r[u].name),{rules:[{pattern:/^[a-zA-z1-9]*$/,message:"\u8bf7\u8f93\u5165\u6570\u5b57\u6216\u5b57\u6bcd"}]})(b.default.createElement(d.default,{placeholder:"\u8bf7\u8f93\u5165"})):a("".concat(r[u].name))(b.default.createElement(d.default,{placeholder:"\u8bf7\u8f93\u5165"}))))):l.push(b.default.createElement(o.default,{span:8,key:u,style:{display:u<t?"block":"none"}},b.default.createElement(k,(0,i.default)({label:"".concat(r[u].label)},e),a("".concat(r[u].name))(b.default.createElement(c.default,{placeholder:"\u8bf7\u9009\u62e9"},n?n.map(function(e,t){return b.default.createElement(c.default.Option,{key:t,value:e},e)}):null)))));return l}},{key:"render",value:function(){return b.default.createElement(E.default,{className:"ant-advanced-search-form",onSubmit:this.handleSearch},b.default.createElement(u.default,{gutter:24},this.getFields()),b.default.createElement(u.default,null,b.default.createElement(o.default,{span:24,style:{textAlign:"right"}},b.default.createElement(n.default,{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),b.default.createElement(n.default,{style:{marginLeft:8},onClick:this.handleReset},"\u91cd\u7f6e"),b.default.createElement("a",{style:{marginLeft:8,fontSize:12},onClick:this.toggle},"\u5c55\u5f00 ",b.default.createElement(r.default,{type:this.state.expand?"up":"down"})))))}}]),t}(b.default.Component))||v),w=E.default.create()(C),q=w;t.default=q}}]);